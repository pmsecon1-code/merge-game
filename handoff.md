# ë©ëƒ¥ ë¨¸ì§€ ê²Œì„ - Architecture (v4.5.0)

## ê°œìš”

**ë©ëƒ¥ ë¨¸ì§€**ëŠ” ë™ë¬¼ì„ í•©ì„±í•˜ì—¬ ì„±ì¥ì‹œí‚¤ëŠ” ëª¨ë°”ì¼ ì¹œí™”ì  ì›¹ ê²Œì„ì…ë‹ˆë‹¤.

- **URL**: https://pmsecon1-code.github.io/merge-game/
- **ë²„ì „**: 4.5.0
- **Firebase í”„ë¡œì íŠ¸**: `merge-game-7cf5f`

---

## íŒŒì¼ êµ¬ì¡°

```
merge2/
â”œâ”€â”€ index.html          # ë©”ì¸ HTML (~514ì¤„)
â”œâ”€â”€ css/
â”‚   â””â”€â”€ styles.css      # ëª¨ë“  CSS (~1375ì¤„)
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ constants.js    # ìƒìˆ˜ + ë°ì´í„° + í—¬í¼ (~388ì¤„)
â”‚   â”œâ”€â”€ state.js        # ì „ì—­ ë³€ìˆ˜ + DOM ì°¸ì¡° (~87ì¤„)
â”‚   â”œâ”€â”€ auth.js         # ì¸ì¦ + ì„¸ì…˜ ê´€ë¦¬ (~129ì¤„)
â”‚   â”œâ”€â”€ save.js         # ì €ì¥/ë¡œë“œ/ê²€ì¦ (~392ì¤„)
â”‚   â”œâ”€â”€ game.js         # ì½”ì–´ ê²Œì„ ë©”ì»¤ë‹‰ (~470ì¤„)
â”‚   â”œâ”€â”€ systems.js      # ìŠ¤í˜ì…œ ë¯¸ì…˜/êµ¬ì¡°/ìƒì  (~467ì¤„)
â”‚   â”œâ”€â”€ album.js        # ì•¨ë²” (ì‚¬ì§„ ìˆ˜ì§‘) ì‹œìŠ¤í…œ (~225ì¤„)
â”‚   â”œâ”€â”€ ui.js           # ë Œë”ë§/ì´í™íŠ¸/ë“œë˜ê·¸/ë„ê° (~515ì¤„)
â”‚   â””â”€â”€ main.js         # ì´ˆê¸°í™” + íƒ€ì´ë¨¸ (~250ì¤„)
â”œâ”€â”€ firestore.rules     # Firebase ë³´ì•ˆ ê·œì¹™
â”œâ”€â”€ firebase.json       # Firebase Hosting + Firestore ì„¤ì •
â”œâ”€â”€ .firebaserc         # Firebase í”„ë¡œì íŠ¸ ì—°ê²°
â”œâ”€â”€ 404.html            # 404 í˜ì´ì§€
â””â”€â”€ handoff.md          # ì´ ë¬¸ì„œ
```

**script ë¡œë“œ ìˆœì„œ**: constants â†’ state â†’ auth â†’ save â†’ game â†’ systems â†’ album â†’ ui â†’ main

**ì´ JS**: ~3423ì¤„, **í•¨ìˆ˜**: ~113ê°œ

---

## UI ë ˆì´ì•„ì›ƒ (ìœ„â†’ì•„ë˜)

| ìˆœì„œ | ìš”ì†Œ | ìŠ¤íƒ€ì¼ |
|------|------|--------|
| 0 | ë¡œê·¸ì¸ í™”ë©´ (ë¹„ë¡œê·¸ì¸ ì‹œ) | ì „ì²´ í™”ë©´ |
| 1 | ìƒë‹¨ë°” (âš¡ì—ë„ˆì§€, ğŸª™ì½”ì¸, ğŸ’ë‹¤ì´ì•„, ğŸƒì¹´ë“œ, Lv.n, ğŸ”‘ë¡œê·¸ì•„ì›ƒ) | status-bar |
| 2 | ğŸ“‹ ë ˆë²¨ì—… ì§„í–‰ë„ (n/ë ˆë²¨Ã—2) | event-bar íŒŒë‘ |
| 3 | ğŸ“‹ ì¼ë°˜ í€˜ìŠ¤íŠ¸ (6ê°œ, 3ê°œì”© í˜ì´ì§€) | event-bar ë³´ë¼ |
| 4 | ë§µ (5Ã—7 = 35ì¹¸) | board-wrapper ë¶„í™ |
| 5 | ğŸ”¨ ìƒì‹œ ë¯¸ì…˜ | event-bar ë³´ë¼ |
| 6 | ğŸ‘‘ ëˆ„ì  ì½”ì¸ (ì¹¸ë§ˆë‹¤ 50ğŸª™) | event-bar |
| 7 | ğŸ“¸ ì•¨ë²” (ì§„í–‰ë„/íƒ€ì´ë¨¸/ë½‘ê¸°/ì•¨ë²”ë³´ê¸°) | event-bar ë³´ë¼ |
| 8 | â­ ìŠ¤í˜ì…œ í€˜ìŠ¤íŠ¸ (ğŸ¦ğŸ ğŸ¦) | event-bar ë…¸ë‘ |
| 9 | ğŸš‘ êµ¬ì¡° í˜„ì¥ (3ë§ˆë¦¬, 1000ğŸª™) | event-bar íŒŒë‘ |
| 10 | ğŸ›’ ìƒì  (5ì¹¸: ëœë¤Ã—3 + ğŸƒì¹´ë“œíŒ© + ğŸ’ë‹¤ì´ì•„íŒ©) | event-bar ì£¼í™© |
| 11 | ğŸ“¦ ì°½ê³  (5ì¹¸) | event-bar ì´ˆë¡ |

---

## ì¸ì¦ ì‹œìŠ¤í…œ (v4.1.0)

### íë¦„
```
[ì ‘ì†] â†’ ë¡œê·¸ì¸ í™”ë©´ (ê²Œì„ ìˆ¨ê¹€)
  â†“ Google íŒì—… ë¡œê·¸ì¸
[ë¡œê·¸ì¸ ì„±ê³µ] â†’ ì„¸ì…˜ ë“±ë¡ â†’ ì„¸ì…˜ ë¦¬ìŠ¤ë„ˆ â†’ í´ë¼ìš°ë“œ ë¡œë“œ â†’ ê²Œì„ í‘œì‹œ
  â†“ (ë‹¤ë¥¸ ê¸°ê¸° ë¡œê·¸ì¸ ê°ì§€ - onSnapshot ì‹¤ì‹œê°„)
[ì¦‰ì‹œ ë¡œê·¸ì•„ì›ƒ] â†’ ë¡œê·¸ì¸ í™”ë©´
```

### ê´€ë ¨ í•¨ìˆ˜ (auth.js)
| í•¨ìˆ˜ | ì—­í•  |
|------|------|
| `startGoogleLogin()` | Google íŒì—… ë¡œê·¸ì¸ |
| `handleGoogleLogin()` | ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ |
| `registerSession()` | Firestore ì„¸ì…˜ ë“±ë¡ |
| `startSessionListener()` | onSnapshot ì‹¤ì‹œê°„ ê°ì‹œ |
| `stopSessionListener()` | ë¦¬ìŠ¤ë„ˆ í•´ì œ |
| `showLoginScreen()` / `showGameScreen()` | í™”ë©´ ì „í™˜ |

---

## ë°ì´í„° ì €ì¥ ì‹œìŠ¤í…œ

### ì €ì¥ íë¦„
```
[ê²Œì„ ì•¡ì…˜] â†’ updateAll() â†’ saveGame()
  â”œâ”€â”€ localStorage (ì¦‰ì‹œ)
  â””â”€â”€ Firestore (500ms ë””ë°”ìš´ìŠ¤)

[ì¤‘ìš” ì•¡ì…˜] â†’ saveGameNow() â†’ ì¦‰ì‹œ ì €ì¥
[í˜ì´ì§€ ì´íƒˆ] â†’ beforeunload/visibilitychange â†’ ì €ì¥
```

### ì €ì¥ ë°ì´í„° êµ¬ì¡°
```javascript
{
  // ë³´ë“œ
  boardState: [{type, level}, ...],      // 35ì¹¸
  storageState: [{type, level}, ...],    // 5ì¹¸
  apartmentState: [{type, level, hp, rescued}, ...], // 3ì¹¸

  // ì¬í™”
  coins, cumulativeCoins, diamonds, energy,

  // ì§„í–‰ë„
  userLevel, questProgress,
  quests: [{id, npc, reqs, reward, cardReward, expiresAt}, ...],
  currentSetRescues, totalQuestsCompleted,

  // ìƒì„±ê¸°
  genLevels: {cat, dog},

  // ìƒì 
  shopItems: [...],  shopNextRefresh,

  // ì•¨ë²” (v4.4.0+)
  cards,                    // ë³´ìœ  ì¹´ë“œ ìˆ˜
  album: ["0_3", "2_7"],   // ìˆ˜ì§‘í•œ ì‚¬ì§„ í‚¤
  albumResetTime,           // ë‹¤ìŒ ì´ˆê¸°í™”ê¹Œì§€ ms

  // ê¸°íƒ€
  discoveredItems, specialMissionCycles, pmType, pmProgress,
  firstEnergyRewardGiven, savedAt
}
```

### ê´€ë ¨ í•¨ìˆ˜ (save.js, 12ê°œ)
`getGameData`, `applyGameData`, `migrateRow7Missions`, `saveGame`, `saveGameNow`, `updateSaveStatus`, `sanitizeForFirestore`, `isValidSaveData`, `saveToCloud`, `loadFromCloud`, `validateGameData`, `initNewGame`

---

## Firebase êµ¬ì¡°

| ì»¬ë ‰ì…˜ | ë¬¸ì„œ | ìš©ë„ |
|--------|------|------|
| `saves` | `{uid}` | ê²Œì„ ì „ì²´ ìƒíƒœ |
| `sessions` | `{uid}` | ì„¸ì…˜ ê´€ë¦¬ (ë‹¨ì¼ ë¡œê·¸ì¸) |

### ë³´ì•ˆ ê·œì¹™ (firestore.rules)
- ë³¸ì¸ ë¬¸ì„œë§Œ ì ‘ê·¼
- saves: `isValidSaveData()` ê²€ì¦ (ìˆ«ì ë²”ìœ„, ë°°ì—´ í¬ê¸°, íƒ€ì„ìŠ¤íƒ¬í”„)
- ì•¨ë²”: `cards 0~9999`, `album ìµœëŒ€ 100`

---

## ê²Œì„ ì‹œìŠ¤í…œ

### ë³´ë“œ (5Ã—7)
```
[0 ][1 ][2 ][3 ][4 ]   â† ìº£íƒ€ì›Œ(0), ê°œì§‘(4)
[5 ][6 ][7 ][8 ][9 ]
[10][11][12][13][14]
[15][16][17][18][19]
[20][21][22][23][24]
[25][26][27][28][29]
[30][31][32][33][34]   â† 7í–‰ ë¯¸ì…˜
```

### 7í–‰ ë¯¸ì…˜
| ì¹¸ | ì¡°ê±´ |
|----|------|
| 30 | ìº£íƒ€ì›Œ Lv.2 |
| 31 | ê°œì§‘ Lv.2 |
| 32 | ğŸ¦ ì‚¬ì (cat Lv.11) |
| 33 | ğŸ»â€â„ï¸ ë¶ê·¹ê³° (dog Lv.11) |
| 34 | í€˜ìŠ¤íŠ¸ 100ê°œ ì™„ë£Œ |

### ìƒì„±ê¸°
| íƒ€ì… | ì´ë¦„ | ìµœëŒ€Lv | ìƒì„±ë¬¼ | í•´ì œ |
|------|------|--------|--------|------|
| cat | ìº£íƒ€ì›Œ | 5 | ê³ ì–‘ì´(11) + ê°„ì‹ | ê¸°ë³¸ |
| dog | ê°œì§‘ | 5 | ê°•ì•„ì§€(11) + ê°„ì‹ | ê¸°ë³¸ |
| toy | ì¥ë‚œê° | - | ì¥ë‚œê°(5) | Lv.5 |
| bird | ìƒˆì¥ | - | ìƒˆ(7) | ìŠ¤í˜ì…œ |
| fish | ì–´í•­ | - | ë¬¼ê³ ê¸°(7) | ìŠ¤í˜ì…œ |
| reptile | ì‚¬ìœ¡ì¥ | - | íŒŒì¶©ë¥˜(7) | ìŠ¤í˜ì…œ |

### í€˜ìŠ¤íŠ¸ (game.js)
- 6ê°œ ë™ì‹œ, 3ê°œì”© í˜ì´ì§€ (ì¢Œìš° ë„¤ë¹„)
- 10ë¶„ íƒ€ì´ë¨¸ (ë§Œë£Œ ì‹œ ìë™ êµì²´)
- 30% í™•ë¥  ì¹´ë“œ í€˜ìŠ¤íŠ¸ (ìƒì„± ì‹œ ê²°ì •)
- ì¹´ë“œ í€˜ìŠ¤íŠ¸: ì¹´ë“œë§Œ ì§€ê¸‰ / ì¼ë°˜ í€˜ìŠ¤íŠ¸: ì½”ì¸ë§Œ ì§€ê¸‰
- ë‚œì´ë„: `baseLevel = 1 + floor(userLevel/3)`, 6ê°œ ì¤‘ 2ê°œëŠ” Lv.3 ì´í•˜ ë³´ì¥
- ë³´ìƒ: `10 + score + random(0~4)` (ë™ë¬¼Ã—5, ê°„ì‹/ì¥ë‚œê°Ã—7)

### ìƒì  (systems.js)
| ì¹¸ | ë‚´ìš© | ê°€ê²© |
|----|------|------|
| 1~3 | ëœë¤ ì•„ì´í…œ (ë™ë¬¼/ê°„ì‹/ì¥ë‚œê°) | ë ˆë²¨ ë§Œí¼ ğŸ’ |
| 4 | ğŸƒ ì¹´ë“œíŒ© Ã—30 (ê³ ì •) | 20ğŸ’ |
| 5 | ğŸ’ ë‹¤ì´ì•„íŒ© Ã—10 (ê³ ì •) | 500ğŸª™ |

- 5ë¶„ë§ˆë‹¤ ê°±ì‹  (ì¹´ë“œíŒ©/ë‹¤ì´ì•„íŒ©ì€ ì¬êµ¬ë§¤ ê°€ëŠ¥, í’ˆì ˆ ì•ˆ ë¨)

### ë³´ìƒ êµ¬ì¡°
| í•­ëª© | ë³´ìƒ |
|------|------|
| í€˜ìŠ¤íŠ¸ ì™„ë£Œ (ì¼ë°˜) | ê°€ë³€ ì½”ì¸ (ë ˆë²¨ ìŠ¤ì¼€ì¼ë§) |
| í€˜ìŠ¤íŠ¸ ì™„ë£Œ (ì¹´ë“œ) | 1~5ì¥ ğŸƒ |
| ëˆ„ì  ì½”ì¸ 1000 | ì¹¸ë§ˆë‹¤ 50ğŸª™ |
| êµ¬ì¡° ì™„ë£Œ (3ë§ˆë¦¬) | 1000ğŸª™ |
| ìŠ¤í˜ì…œ ë¯¸ì…˜ | 500ğŸª™ + 10ğŸ’ |
| ìƒì‹œ ë¯¸ì…˜ | 100ğŸª™ |
| ë ˆë²¨ì—… | ceil(ë ˆë²¨/5)Ã—5 ğŸ’ |
| í…Œë§ˆ ì™„ì„± (9/9) | 500ğŸª™ (Ã—9 í…Œë§ˆ) |
| ì•¨ë²” ì™„ì„± (81/81) | 100ğŸ’ + ë¦¬ì…‹ |

---

## ì•¨ë²” ì‹œìŠ¤í…œ (v4.4.0~v4.5.0)

### êµ¬ì¡°
- 9 í…Œë§ˆ Ã— 9ì¥ = **81ì¥** ì‚¬ì§„
- ë“±ê¸‰: **N**(6ì¥, 75%) / **R**(2ì¥, 20%) / **SR**(1ì¥, 5%)

### ìƒìˆ˜
```javascript
ALBUM_CARD_COST = 30        // ë½‘ê¸° í•„ìš” ì¹´ë“œ
ALBUM_DRAW_COUNT = 2         // 1íšŒ ë½‘ê¸° ì‚¬ì§„ ìˆ˜
ALBUM_CARD_CHANCE = 0.30     // í€˜ìŠ¤íŠ¸ ì¹´ë“œ ë³´ìƒ í™•ë¥  (30%)
ALBUM_CARD_MIN = 1           // ì¹´ë“œ ìµœì†Œ
ALBUM_CARD_MAX = 5           // ì¹´ë“œ ìµœëŒ€
ALBUM_DUPE_REWARD = { N: 3, R: 8, SR: 20 }
ALBUM_COMPLETE_COINS = 500   // í…Œë§ˆ ì™„ì„± ë³´ìƒ
ALBUM_ALL_COMPLETE_DIAMONDS = 100  // ì „ì²´ ì™„ì„± ë³´ìƒ
ALBUM_CYCLE_MS = 14ì¼        // ì´ˆê¸°í™” ì£¼ê¸°
```

### íë¦„
```
[í€˜ìŠ¤íŠ¸ ì™„ë£Œ] â†’ 30% í™•ë¥  ì¹´ë“œ 1~5ì¥ (ìƒì„± ì‹œ ê²°ì •)
      â†“
[ì¹´ë“œ 30ì¥] â†’ ë½‘ê¸° â†’ ì‚¬ì§„ 2ì¥
      â†“         â†“
   [ì‹ ê·œ]    [ì¤‘ë³µ] â†’ ë“±ê¸‰ë³„ ì¹´ë“œ ë°˜í™˜ (N:3, R:8, SR:20)
      â†“
[í…Œë§ˆ 9/9] â†’ +500ğŸª™ (ìµœëŒ€ 9íšŒ = 4500ğŸª™)
      â†“
[ì „ì²´ 81/81] â†’ +100ğŸ’ â†’ ì•¨ë²” ë¦¬ì…‹ â†’ ìƒˆ ì£¼ê¸°
```

### ë¦¬ì…‹ ì¡°ê±´ (ë‘˜ ì¤‘ ë¨¼ì €)
| ì¡°ê±´ | ë™ì‘ |
|------|------|
| 81ì¥ ìˆ˜ì§‘ | 100ğŸ’ + cards/album/timer ì´ˆê¸°í™” |
| 14ì¼ ê²½ê³¼ | í† ìŠ¤íŠ¸ ì•Œë¦¼ + ì´ˆê¸°í™” (ë³´ìƒ ì—†ìŒ) |

### í…Œë§ˆ ëª©ë¡
| # | í…Œë§ˆ | ì•„ì´ì½˜ |
|---|------|--------|
| 0 | ê³ ì–‘ì´ì˜ í•˜ë£¨ | ğŸ± |
| 1 | ê°•ì•„ì§€ì˜ í•˜ë£¨ | ğŸ¶ |
| 2 | ìƒˆë“¤ì˜ ì„¸ê³„ | ğŸ¦ |
| 3 | ìˆ˜ì¤‘ ëª¨í—˜ | ğŸŸ |
| 4 | íŒŒì¶©ë¥˜ íƒí—˜ | ğŸ¦ |
| 5 | ê°„ì‹ íŒŒí‹° | ğŸ° |
| 6 | ì¥ë‚œê° ì™•êµ­ | ğŸ§¸ |
| 7 | êµ¬ì¡° ì´ì•¼ê¸° | ğŸš‘ |
| 8 | íŠ¹ë³„í•œ ìˆœê°„ | ğŸŒŸ |

### UI
- **ì•¨ë²”ë°”**: ì§„í–‰ë„(0/81), ë³´ìƒ(100ğŸ’), íƒ€ì´ë¨¸, ë½‘ê¸° ë²„íŠ¼, ì•¨ë²” ë³´ê¸° ë²„íŠ¼, í”„ë¡œê·¸ë ˆìŠ¤ë°”(ì‚¬ì§„)
- **ìƒë‹¨ë°”**: ğŸƒì¹´ë“œ ìˆ˜ í‘œì‹œ (ë‹¤ì´ì•„ì™€ ë ˆë²¨ ì‚¬ì´)
- **ë½‘ê¸° ë²„íŠ¼**: í•­ìƒ í™œì„±í™”, ì¹´ë“œ ë¶€ì¡± ì‹œ í† ìŠ¤íŠ¸ ë©”ì‹œì§€
- **ì•¨ë²” ëª¨ë‹¬**: 9ê°œ í…Œë§ˆ íƒ­ + 3Ã—3 ì‚¬ì§„ ê·¸ë¦¬ë“œ + ë“±ê¸‰ë³„ í…Œë‘ë¦¬ìƒ‰ (N:íšŒìƒ‰, R:íŒŒë‘, SR:ê¸ˆìƒ‰)
- **ë¯¸ë°œê²¬ ì‚¬ì§„**: opacity 0.5, ë“±ê¸‰ í…Œë‘ë¦¬ìƒ‰ ìœ ì§€ (grayscale ì—†ìŒ)

### ê´€ë ¨ í•¨ìˆ˜ (album.js, 14ê°œ)
| í•¨ìˆ˜ | ì—­í•  |
|------|------|
| `getRandomPhoto()` | ë“±ê¸‰ í™•ë¥ ë¡œ ëœë¤ ì‚¬ì§„ ì„ íƒ |
| `processDrawResult()` | ì‹ ê·œ/ì¤‘ë³µ ì²˜ë¦¬ |
| `drawPhotos()` | 30ì¹´ë“œ ì†Œë¹„ â†’ 2ì¥ ë½‘ê¸° |
| `openPhotoDraw()` / `closePhotoDraw()` | ë½‘ê¸° íŒì—… |
| `checkAlbumReset()` | 14ì¼ ì£¼ê¸° ì´ˆê¸°í™” |
| `openAlbum()` / `closeAlbum()` | ì•¨ë²” ëª¨ë‹¬ |
| `renderAlbumTabs()` | í…Œë§ˆ íƒ­ (ì§„í–‰ë„) |
| `switchAlbumTheme()` | í…Œë§ˆ ì „í™˜ |
| `renderAlbumGrid()` | 3Ã—3 ì‚¬ì§„ ê·¸ë¦¬ë“œ |
| `checkThemeComplete()` | í…Œë§ˆ ì™„ì„± â†’ 500ğŸª™ |
| `checkAlbumAllComplete()` | ì „ì²´ ì™„ì„± â†’ 100ğŸ’ + ë¦¬ì…‹ |
| `getAlbumProgress()` | ìˆ˜ì§‘ ìˆ˜ ê³„ì‚° |
| `updateAlbumBarUI()` | ì•¨ë²”ë°” + ìƒë‹¨ë°” ì¹´ë“œ ì—…ë°ì´íŠ¸ |

---

## ì£¼ìš” í•¨ìˆ˜ ëª©ë¡ (íŒŒì¼ë³„)

### game.js (19ê°œ)
`discoverItem`, `countEasyQuests`, `generateNewQuest`, `scrollQuests`, `completeQuest`, `checkExpiredQuests`, `formatQuestTimer`, `spawnItem`, `spawnToy`, `handleCellClick`, `triggerGen`, `getEnergyPrice`, `checkEnergyAfterUse`, `openEnergyPopup`, `closeEnergyPopup`, `buyEnergy`, `getActiveTypes`, `checkToyGeneratorUnlock`, `moveItem`

### systems.js (26ê°œ)
`getSlotUnlockLevel`, `updateSpecialMissionUI`, `updateSlot`, `spawnSpecialGenerator`, `completeSpecialMission`, `addPmProgress`, `updatePmUI`, `checkAutoCompleteMissions`, `updateSpecialQuestUI`, `giveSpecialReward`, `updateRescueQuestUI`, `startShopTimer`, `refreshShop`, `generateRandomShopItem`, `renderShop`, `buyShopItem`, `initApartment`, `startAnimalHPTimer`, `showHelpBubble`, `renderApartment`, `openRoulette`, `renderRouletteLabels`, `updateRoulettePopupUI`, `startSpin`, `finishSpin`, `askSellItem`

### ui.js (25ê°œ)
`renderGrid`, `createItem`, `updateAll`, `updateUI`, `updateLevelupProgressUI`, `updateTimerUI`, `updateQuestUI`, `spawnParticles`, `spawnItemEffect`, `showLuckyEffect`, `showFloatText`, `showToast`, `showMilestonePopup`, `closeOverlay`, `formatTime`, `updateEnergyPopupTimer`, `handleDragStart`, `handleDragMove`, `handleDragEnd`, `openGuide`, `closeModal`, `switchGuideTab`, `renderGuideList`, `updateUpgradeUI`, `upgradeGenerator`

### main.js (8ê°œ)
`init`, `createBoardCells`, `createStorageCells`, `createShopCells`, `startEnergyRecovery`, `startCooldownTimer`, `startRescueTimer`, `startQuestTimer`

---

## ìƒìˆ˜ (constants.js)

### ê·¸ë¦¬ë“œ
`GRID_COLS=5`, `GRID_ROWS=7`, `BOARD_SIZE=35`, `STORAGE_SIZE=5`, `APARTMENT_ROOMS=3`, `SHOP_SIZE=5`

### ë°¸ëŸ°ìŠ¤
`MAX_ENERGY=100`, `RECOVERY_SEC=30`, `SHOP_REFRESH_MS=300000`, `UNLOCK_COST_BOARD=100`, `RESCUE_QUEST_REWARD=1000`, `SNACK_CHANCE=0.08`

### ì—ë„ˆì§€ êµ¬ë§¤
`getEnergyPrice()` â†’ 500 + êµ¬ë§¤íšŸìˆ˜Ã—100 (3ì‹œê°„ ë¦¬ì…‹)

### ë°ì´í„° ë°°ì—´ (14ê°œ)
`CATS`(11), `DOGS`(11), `BIRDS`(7), `FISH`(7), `REPTILES`(7), `CAT_SNACKS`(7), `DOG_SNACKS`(7), `CAT_TOYS`(5), `DOG_TOYS`(5), `ALBUM_THEMES`(9í…Œë§ˆÃ—9ì¥), `NPC_AVATARS`, `ROULETTE_SEGMENTS`, `PM_GOALS`, `PM_TITLES`

### í—¬í¼ í•¨ìˆ˜ (5ê°œ)
`getItemList`, `getMaxLevel`, `getItemData`, `getGeneratorName`, `getSpecialTypeName`

---

## ë°°í¬

### GitHub Pages (ê²Œì„)
```bash
git push   # â†’ ìë™ ë°°í¬ (1~2ë¶„)
```

### Firebase (ì¸ì¦ + ê·œì¹™)
```bash
firebase deploy --only hosting           # ì¸ì¦ í•¸ë“¤ëŸ¬
firebase deploy --only firestore:rules   # ë³´ì•ˆ ê·œì¹™
```

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

| ì¦ìƒ | ì›ì¸ | í•´ê²° |
|------|------|------|
| ë¡œê·¸ì¸ 404 | Firebase Hosting ë¯¸ë°°í¬ | `firebase deploy --only hosting` |
| ë¡œê·¸ì¸ ë²„íŠ¼ ë¬´ë°˜ì‘ | JS ì—ëŸ¬ | F12 ì½˜ì†” í™•ì¸ |
| ë‹¤ì¤‘ ê¸°ê¸° ë¡œê·¸ì•„ì›ƒ ì•ˆ ë¨ | onSnapshot ë¯¸ì‹œì‘ | `startSessionListener()` í™•ì¸ |
| ë°ì´í„° ì†ì‹¤ | ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ + ë¹ˆ ë°ì´í„° ì €ì¥ | v4.2.8 3ì¤‘ ë°©ì–´ ì²´ê³„ë¡œ í•´ê²° |

---

## ë³€ê²½ ì´ë ¥

### v4.5.0 (2026-02-05)
- ì•¨ë²” ì‹œìŠ¤í…œ UI/ë¡œì§ ê°œì„ 
  - ìƒë‹¨ë°”: "ë©ëƒ¥ ë¨¸ì§€" ì œê±°, ğŸƒì¹´ë“œ ìˆ˜ í‘œì‹œ ì¶”ê°€ (ë‹¤ì´ì•„â†”ë ˆë²¨ ì‚¬ì´)
  - ì•¨ë²”ë°”: í”„ë¡œê·¸ë ˆìŠ¤ë°” ì¹´ë“œ(0/30) â†’ ì‚¬ì§„(0/81) ì§„í–‰ë„ë¡œ ë³€ê²½
  - ì•¨ë²”ë°”: ì¹´ë“œ ì¹´ìš´íŠ¸ í–‰ ì œê±°, ë½‘ê¸° ë²„íŠ¼ ì²« í–‰ìœ¼ë¡œ ì´ë™
  - ì•¨ë²” ê·¸ë¦¬ë“œ: ë“±ê¸‰ë³„ ê·¸ë£¹í•‘ ì œê±° â†’ ë‹¨ìˆœ 3Ã—3 ë°°ì¹˜
  - ë¯¸ë°œê²¬ ì‚¬ì§„: grayscale ì œê±°, ë“±ê¸‰ í…Œë‘ë¦¬ìƒ‰ ìœ ì§€ (opacity 0.5ë§Œ)
  - ë½‘ê¸° ë²„íŠ¼: í•­ìƒ í™œì„±í™”, ì¹´ë“œ ë¶€ì¡± ì‹œ í† ìŠ¤íŠ¸ ë©”ì‹œì§€
- ì•¨ë²” ë³´ìƒ ë³€ê²½
  - 81ì¥ ì „ì²´ ì™„ì„± ë³´ìƒ: 100ğŸ’ ì¶”ê°€
  - 81ì¥ ì™„ì„± ì‹œ ì•¨ë²” ë¦¬ì…‹ (cards/album/timer ì´ˆê¸°í™”)
  - ë¦¬ì…‹ ì¡°ê±´: 81ì¥ ì™„ì„± OR 14ì¼ ê²½ê³¼ (ë¨¼ì € ë‹¬ì„±)
  - ì•¨ë²”ë°” í…ìŠ¤íŠ¸: (ì™„ì„± 500ğŸª™) â†’ (100ğŸ’)
- ì¹´ë“œ ì‹œìŠ¤í…œ ë³€ê²½
  - ì¹´ë“œ ë³´ìƒ í™•ë¥ : 10% â†’ 30%
  - ì¹´ë“œ ë³´ìƒ: í€˜ìŠ¤íŠ¸ ìƒì„± ì‹œ ê²°ì • (ì™„ë£Œ ì‹œê°€ ì•„ë‹˜)
  - ì¹´ë“œ í€˜ìŠ¤íŠ¸: ì¹´ë“œë§Œ ì§€ê¸‰ (ì½”ì¸ ì—†ìŒ)
- ìƒì  ë³€ê²½
  - 4ë²ˆ ì¹¸: ğŸƒì¹´ë“œíŒ© Ã—30 ê³ ì • (20ğŸ’)
  - êµ¬ì„±: ëœë¤Ã—3 + ì¹´ë“œíŒ© + ë‹¤ì´ì•„íŒ©

### v4.4.0 (2026-02-05)
- ì•¨ë²” ì‹œìŠ¤í…œ (ì‚¬ì§„ ìˆ˜ì§‘) ì¶”ê°€
  - 9 í…Œë§ˆ Ã— 9ì¥ = ì´ 81ì¥ (N:6, R:2, SR:1)
  - í€˜ìŠ¤íŠ¸ ì™„ë£Œ ì‹œ ì¹´ë“œ íšë“ â†’ 30ì¥ìœ¼ë¡œ ë½‘ê¸° â†’ ì•¨ë²” ìˆ˜ì§‘
  - í…Œë§ˆ ì™„ì„± ì‹œ 500ğŸª™ ë³´ìƒ
  - 14ì¼ ì£¼ê¸° ìë™ ì´ˆê¸°í™” (íƒ€ì´ë¨¸ í‘œì‹œ)
  - ì•¨ë²” ëª¨ë‹¬: í…Œë§ˆ íƒ­ + 3Ã—3 ê·¸ë¦¬ë“œ
- ì‹ ê·œ íŒŒì¼: `js/album.js`
- ì‹ ê·œ ì €ì¥ í•„ë“œ: `cards`, `album`, `albumResetTime`
- firestore.rules: ì•¨ë²” í•„ë“œ ê²€ì¦ ì¶”ê°€

### v4.3.2 (2026-02-04)
- í€˜ìŠ¤íŠ¸ UI: ë³´ìƒ/íƒ€ì´ë¨¸ ë¶„ë¦¬, ê°€ìš´ë° ì •ë ¬
- í€˜ìŠ¤íŠ¸ ë°¸ëŸ°ìŠ¤: ê°„ì‹30%/ë™ë¬¼50%, ë³´ìƒ 50% ê°ì†Œ
- UI: ë ˆë²¨ì—… ì§„í–‰ë„ ë§¨ ìœ„, ëˆ„ì  ì½”ì¸ ìƒì‹œë¯¸ì…˜ ì•„ë˜

### v4.3.1 (2026-02-04)
- ì—ë„ˆì§€ ì†Œì§„ ì‹œ íŒì—… + ìµœì´ˆ ë¬´ë£Œ 100ê°œ ì¶©ì „

### v4.3.0 (2026-02-04)
- ì˜¤í”„ë¼ì¸ ì—ë„ˆì§€ íšŒë³µ

### v4.2.6~v4.2.9 (2026-02-03~04)
- ì¥ë‚œê° ìƒì„±ê¸° ğŸ§¸ (Lv.5 í•´ì œ)
- í€˜ìŠ¤íŠ¸ 10ë¶„ íƒ€ì´ë¨¸
- ë ˆë²¨ì—… ë³´ìƒ êµ¬ê°„ì œ
- ë°ì´í„° ì†ì‹¤ ë°©ì§€ 3ì¤‘ ë°©ì–´
- ìœ ì € ë°ì´í„° ë³µêµ¬

### v4.1.0~v4.2.5 (2026-02-03)
- ì‹¤ì‹œê°„ ì„¸ì…˜ ê°ì§€ (onSnapshot)
- UI í†µì¼ (event-bar)
- 7í–‰ ë¯¸ì…˜ í™•ì¥
- ì—ë„ˆì§€ êµ¬ë§¤ ê°€ê²© ì¦ê°€
- ë„ê° ì‹œìŠ¤í…œ

### v4.0.0 (2026-02-03)
- ë¡œê·¸ì¸ í•„ìˆ˜ + í´ë¼ìš°ë“œ ë°ì´í„° ìš°ì„ 

### v1.x~v3.x (2026-02-02~03)
- ì´ˆê¸° êµ¬í˜„ â†’ Firebase ì—°ë™ â†’ íŒŒì¼ ë¶„ë¦¬

---

## To-do

- [ ] ì‚¬ìš´ë“œ íš¨ê³¼ ì¶”ê°€
- [ ] íŠœí† ë¦¬ì–¼ í™•ì¥
